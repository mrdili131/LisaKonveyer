@page "/Requests"

<nav>
        <h1>Lisa Kredit konveyeri</h1>
        <select name="" id="" @onchange="SendUser">
            <option value="/">-------------------</option>
            <option value="/ApplicationsPage">Arizani yuborish</option>
            <option value="/Requests">Arizalar tarixi</option>
        </select>
        <a href="">@(CurrentUser?.Email ?? "Kirilmagan hisob")</a>
</nav>

<div class="main">
        <h1>Arizalar</h1>
        <div class="ariza-container">
            <table>
                <thead>
                    <tr>
                        <td>ID</td>
                        <td>Contract ID</td>
                        <td>Sana</td>
                        <td>FIO</td>
                        <td>JSHSHIR</td>
                        <td>Ariza miqdori</td>
                        <td>Kredit maxsuloti</td>
                        <td>Foidalanuvchi</td>
                        <td>Filial</td>
                        <td>Xolati</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>123321</th>
                        <th>F13-099925</th>
                        <th>14.05.2025</th>
                        <th>Dilmuhammad Abduqodirov Sodirjon o‘g‘li</th>
                        <th>45254567484642345</th>
                        <th>10 000 000</th>
                        <th>Imkoniyat</th>
                        <th>D.S.Abduqodirov</th>
                        <th>Chirchiq filiali</th>
                        <th>berilgan</th>
                    </tr>
                    <tr>
                        <th>123321</th>
                        <th>F13-099925</th>
                        <th>14.05.2025</th>
                        <th>Dilmuhammad Abduqodirov Sodirjon o‘g‘li</th>
                        <th>45254567484642345</th>
                        <th>10 000 000</th>
                        <th>Imkoniyat</th>
                        <th>D.S.Abduqodirov</th>
                        <th>Chirchiq filiali</th>
                        <th>berilgan</th>
                    </tr>
                    <tr>
                        <th>123321</th>
                        <th>F13-099925</th>
                        <th>14.05.2025</th>
                        <th>Dilmuhammad Abduqodirov Sodirjon o‘g‘li</th>
                        <th>45254567484642345</th>
                        <th>10 000 000</th>
                        <th>Imkoniyat</th>
                        <th>D.S.Abduqodirov</th>
                        <th>Chirchiq filiali</th>
                        <th>berilgan</th>
                    </tr>
                    <tr>
                        <th>123321</th>
                        <th>F13-099925</th>
                        <th>14.05.2025</th>
                        <th>Dilmuhammad Abduqodirov Sodirjon o‘g‘li</th>
                        <th>45254567484642345</th>
                        <th>10 000 000</th>
                        <th>Imkoniyat</th>
                        <th>D.S.Abduqodirov</th>
                        <th>Chirchiq filiali</th>
                        <th>berilgan</th>
                    </tr>
                    <tr>
                        <th>123321</th>
                        <th>F13-099925</th>
                        <th>14.05.2025</th>
                        <th>Dilmuhammad Abduqodirov Sodirjon o‘g‘li</th>
                        <th>45254567484642345</th>
                        <th>10 000 000</th>
                        <th>Imkoniyat</th>
                        <th>D.S.Abduqodirov</th>
                        <th>Chirchiq filiali</th>
                        <th>berilgan</th>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>


@code{
    private ApplicationUser CurrentUser;

    protected override async Task OnInitializedAsync(){
        var state = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = state.User;

        if (user.Identity.IsAuthenticated){
            CurrentUser = await UserManager.GetUserAsync(user);
        }
    }

    private void SendUser(ChangeEventArgs e){
        if (e.Value != null){
            Navigator.NavigateTo(e.Value.ToString());
        }
    }
}